<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>lib/marionette/actions.js - Marionette JS Client</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.7.0/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.7.0/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
          <h1>
            Marionette JS Client
          </h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.5.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/Marionette.Actions.html">Marionette.Actions</a></li>
            
                <li><a href="../classes/Marionette.Client.html">Marionette.Client</a></li>
            
                <li><a href="../classes/Marionette.CommandStream.html">Marionette.CommandStream</a></li>
            
                <li><a href="../classes/Marionette.Drivers.Abstract.html">Marionette.Drivers.Abstract</a></li>
            
                <li><a href="../classes/Marionette.Drivers.MozTcp.html">Marionette.Drivers.MozTcp</a></li>
            
                <li><a href="../classes/Marionette.Drivers.Tcp.html">Marionette.Drivers.Tcp</a></li>
            
                <li><a href="../classes/Marionette.Element.html">Marionette.Element</a></li>
            
                <li><a href="../classes/Marionette.MultiActions.html">Marionette.MultiActions</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: lib/marionette/actions.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
(function(module, ns) {

  /**
   * Actions is used to denote a set of actions that
   * have to be executed in particular order.
   *
   * @class Marionette.Actions
   * @param {Marionette.Client} context of a client.
   */
  function Actions(client) {
    this.client = client;
    this.actionChain = [];
    this.currentId = null;
  }

  Actions.prototype = {

    /**
     * Send a &#x27;touchstart&#x27; event to this element. If no coordinates are given,
     * it will be targeted at the center of the element.
     * If given, it will be targeted at the (x,y) coordinates
     * relative to the top-left corner of the element.
     *
     * @method press
     * @param {Object} element {{#crossLink &quot;Marionette.Element&quot;}}{{/crossLink}}
     *                         to press on.
     * @param {Number} x optional, x-coordinate to tap,
     *                   relative to the top-left corner of the element.
     * @param {Number} y optional, y-coordinate to tap,
     *                   relative to the top-left corner of the element.
     * @return {Object} self.
     */
    press: function press(element, x, y) {
      this.actionChain.push([&#x27;press&#x27;, element.id, x, y]);
      return this;
    },

    /**
     * release() can only be called
     * if press() has already be called on this element.
     * Send &#x27;touchend&#x27; event to whenever the finger is.
     *
     * @method release
     *
     * @return {Object} self.
     */
    release: function release() {
      this.actionChain.push([&#x27;release&#x27;]);
      return this;
    },

    /**
     * move() can only be called
     * if press() has already be called on this element.
     * move() send &#x27;touchmove&#x27; event which moves the finger to target element.
     *
     * @method move
     * @param {Object} element {{#crossLink &quot;Marionette.Element&quot;}}{{/crossLink}}
     *                         of the move gesture.
     *
     * @return {Object} self.
     */
    move: function move(element) {
      this.actionChain.push([&#x27;move&#x27;, element.id]);
      return this;
    },

    /**
     * moveByOffset() can only be called
     * if press() has already be called on this element.
     * moveByOffset() send &#x27;touchmove&#x27; event.
     *
     * @method moveByOffset
     *
     * @param {Number} x x-coordinate relative to the top-left corner of
     *                   the target element of the last touch.
     *
     * @param {Number} y y-coordinate relative to the top-left corner of
     *                   the target element of the last touch.
     *
     * @return {Object} self.
     */
    moveByOffset: function moveByOffset(x, y) {
      this.actionChain.push([&#x27;moveByOffset&#x27;, x, y]);
      return this;
    },

    /**
     * wait() waits for specified time period.
     *
     * @method wait
     * @param {Number} time wait for &quot;time&quot; seconds.
     *
     * @return {Object} self.
     */
    wait: function wait(time) {
      this.actionChain.push([&#x27;wait&#x27;, time]);
      return this;
    },

    /**
     * cancel() can only be called
     * if press() has already be called on this element.
     * cancel() send &#x27;touchcancel&#x27; event to whenever the finger is.
     *
     * @method cancel
     *
     * @return {Object} self.
     */
    cancel: function cancel() {
      this.actionChain.push([&#x27;cancel&#x27;]);
      return this;
    },

    /**
     * tap() performs a quick tap on the target.
     * action.tap() is essentially action.press().release().
     *
     * @method tap
     * @param {Object} element {{#crossLink &quot;Marionette.Element&quot;}}{{/crossLink}}
     *                         to press/release on.
     *
     * @param {Number} x optional, x-coordinate relative to the top-left corner
     *                   of the element of the last touch.
     *
     * @param {Number} y optional, y-coordinate relative to the top-left corner
     *                   of the element of the last touch.
     *
     * @return {Object} self.
     */
    tap: function tap(element, x, y) {
      this.actionChain.push([&#x27;press&#x27;, element.id, x, y]);
      this.actionChain.push([&#x27;release&#x27;]);
      return this;
    },

    /**
     * doubleTap() performs a double
     * {{#crossLink &quot;Marionette.Actions/tap&quot;}}{{/crossLink}} on the element.
     *
     * @method doubleTap
     * @param {Object} element {{#crossLink &quot;Marionette.Element&quot;}}{{/crossLink}}
     *                         to double tap on.
     *
     * @param {Number} x optional, x-coordinate relative to
     * the top-left corner of the element of the last touch.
     *
     * @param {Number} y optional, y-coordinate relative to
     * the top-left corner of the element of the last touch.
     *
     * @return {Object} self.
     */
    doubleTap: function doubleTap(element, x, y) {
      this.actionChain.push([&#x27;press&#x27;, element.id, x, y]);
      this.actionChain.push([&#x27;release&#x27;]);
      this.actionChain.push([&#x27;press&#x27;, element.id, x, y]);
      this.actionChain.push([&#x27;release&#x27;]);
      return this;
    },

    /**
     * flick() sends a sequence of touch events:
     * touchstart, touchmove, touchend.
     * It scrolls the page in any direction
     * within period of time provided(duration).
     *
     * @method flick
     * @param {Object} element {{#crossLink &quot;Marionette.Element&quot;}}{{/crossLink}}
     *                         to double tap on.
     *
     * @param {Number} x1 starting x-coordinates of
     *                    the finger relative to the element.
     *
     * @param {Number} y1 starting y-coordinates of
     *                    the finger relative to the element.
     *
     * @param {Number} x2 ending x-coordinates of
     *                    the finger relative to the element.
     *
     * @param {Number} y2 ending y-coordinates of
     *                    the finger relative to the element.
     *
     * @param {Number} duration optional,
     *                          time needed for the flick gesture for complete.
     *
     * @return {Object} self.
     */
    flick: function flick(element, x1, y1, x2, y2, duration) {
      var time = 0;
      var timeIncrement = 10.0;
      if (duration === undefined) {
        duration = 200;
      }
      if (timeIncrement &gt;= duration) {
        timeIncrement = duration;
      }
      var moveX = timeIncrement / duration * (x2 - x1);
      var moveY = timeIncrement / duration * (y2 - y1);

      this.actionChain.push([&#x27;press&#x27;, element.id, x1, y1]);
      while (time &lt; duration) {
        time += timeIncrement;
        this.actionChain.push([&#x27;moveByOffset&#x27;, moveX, moveY]);
        this.actionChain.push([&#x27;wait&#x27;, timeIncrement / 1000]);
      }
      this.actionChain.push([&#x27;release&#x27;]);

      return this;
    },

    /**
     * Sends &#x27;touchstart&#x27;,
     * then wait for &#x27;time&#x27; seconds, and send &#x27;touchend&#x27; eventually.
     * longPress() cannot follow any active touch,
     * i.e. the finger must leave the screen before longPress() gets called.
     *
     * @method longPress
     * @param {Object} element {{#crossLink &quot;Marionette.Element&quot;}}{{/crossLink}}
     *                         of the long press.
     *
     * @param {Number} time the waiting time between touchstart and touchend.
     *
     * @return {Object} self.
     */
    longPress: function longPress(element, time) {
      this.actionChain.push([&#x27;press&#x27;, element.id]);
      this.actionChain.push([&#x27;wait&#x27;, time]);
      this.actionChain.push([&#x27;release&#x27;]);
      return this;
    },

    /**
     * perform() will send the whole action chain built
     * so far to the server side for execution.
     *
     * @method perform
     * @param {Function} callback callback when the perform completes.
     *
     * @return {Object} self.
     */
    perform: function perform(callback) {
      var cmd = {
        type: &#x27;actionChain&#x27;,
        chain: this.actionChain,
        nextId: this.currentId
      };
      this.currentId = this.client._sendCommand(cmd, &#x27;value&#x27;, callback);
      this.actionChain = [];
      return this;
    }
  };

  module.exports = Actions;

}.apply(
  this,
  (this.Marionette) ?
    [Marionette(&#x27;actions&#x27;), Marionette] :
    [module, require(&#x27;../../lib/marionette/marionette&#x27;)]
));

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
